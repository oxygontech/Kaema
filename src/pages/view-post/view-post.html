<!--
  Generated template for the ViewPostPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{this.post?.subject}}</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <ion-grid *ngIf='this.post.userProfile'>
    <ion-row>
      <ion-col col-12>
        <img  src= '{{this.post?.imageURL}}' class='viewPostImg'>
     </ion-col>
  </ion-row>

  <ion-row>
      <ion-col col-1></ion-col>
      <ion-col col-10 align='center'>
       <img   src= {{this.post?.userProfile?.userPhotoURL}} class='viewPostProImg'>
       </ion-col>
       <ion-col col-1></ion-col>
   </ion-row> 

   <ion-row>
      <ion-col col-1></ion-col>
      <ion-col col-10 align='center'>
       {{this.post?.userProfile?.firstName}} 
       </ion-col>
       <ion-col col-1></ion-col>
   </ion-row> 

   <ion-row>
      <ion-col col-1></ion-col>
      <ion-col col-10 align='center'>
       {{this.post?.description}} 
       </ion-col>
       <ion-col col-1></ion-col>
   </ion-row> 

   <ion-row>
      <ion-col col-5 align='left'><ion-badge>Avaliable for {{this.post.daysAvailable}} Days</ion-badge></ion-col>
      <ion-col col-3 align='left'>
          <ion-badge *ngIf='servesRemaning>0'>{{this.servesRemaning}} Servings</ion-badge>
          <ion-badge *ngIf='servesRemaning<=0' color='danger'>{{this.servesRemaning}} Servings</ion-badge>
        </ion-col>
      <ion-col col-2 align='left'><ion-badge>Type : {{this.post.postType}}</ion-badge></ion-col>
      <ion-col col-2 ></ion-col>
  </ion-row>

   <ion-row>
      <ion-col col-1></ion-col>
      <ion-col col-11 align='left' >
          <ion-label stacked>Pick up Time</ion-label>
          {{this.post?.pickUpTime}} 
      </ion-col> 
    </ion-row>


   <ion-row>
   <ion-col col-12 >
      <ion-card>
          <ion-card-header>
            Pick up Location
          </ion-card-header>
          <ion-card-content>
           <img *ngIf=locationImage class='postMapImage' src={{this.locationImage}}>
           <div *ngIf=!locationImage>Not Set</div>
          </ion-card-content>
        </ion-card>
  </ion-col> 
  </ion-row>
 
 
   <div *ngIf='this.post?.userId!=this.user?.uId' >
        <ion-row>
          <ion-col col-12 >

          <div  *ngIf='servesRemaning>0'>
          <button *ngIf='!requestStatus' class='summaryButtons' id='requestButton' ion-button  outline (click)='requestPost()'>Request</button>
          <button *ngIf='requestStatus' class='summaryButtons' id='requestButton' ion-button  outline ion-button icon-right disabled>
              Request Sent
             <ion-icon name="checkmark"></ion-icon>
          </button>
          
        </div>
          <div *ngIf='servesRemaning<=0'>         
            <button *ngIf='requestStatus' class='summaryButtons' id='requestButton' ion-button  outline ion-button icon-right disabled>
              No Serving to request
          </button>
        </div>
          
         </ion-col>
        </ion-row> 

        <ion-row>
          <ion-col col-12>
            <button  class='summaryButtons' id='dmButton' ion-button  outline (click)='directMessage()'>Send Message</button>
          </ion-col>
        </ion-row>
     </div>
    
   <div *ngIf='servesRemaning>0'> 
     <div *ngIf='this.post?.userId!=this.user?.uId' >
        <ion-row>
          <ion-col col-12 >
          <button class='summaryButtons' id='scanButton' ion-button  outline (click)='scanCode()'>Scan Code</button>
          </ion-col>
        </ion-row> 
     </div>
  

<div *ngIf='this.post?.userId==this.user?.uId' >
  <ion-row>
    <ion-col col-12 >
      

         <ion-card *ngIf="this.qrImage">
              <ion-card-header>
                QR Code 
              </ion-card-header>
          <ngx-qrcode [qrc-value]="this.qrImage"></ngx-qrcode>
        </ion-card>


         <ion-card *ngIf="hiddenText">
            <ion-card-content>
              Result from Scan: {{ hiddenText }}
            </ion-card-content>
          </ion-card>

          
   </ion-col> 
   </ion-row>
 </div>
</div>

  </ion-grid>  

</ion-content>
